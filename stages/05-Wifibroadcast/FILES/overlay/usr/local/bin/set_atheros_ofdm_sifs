#!/bin/bash

usage(){
    echo
    echo "set_atheros_ofdm_sifs - Script to set Atheros module ofdm_sifs parameter"
    echo
    echo "Usage: $0 <set_atheros_ofdm_sifs> <ofdm_sifs>"
    echo
    echo "Example: set_atheros_ofdm_sifs 16"
    echo
    exit 1
}

[[ $# -eq 0 ]] && usage

cp /etc/modprobe.d/ath9k_hw.conf /etc/modprobe.d/ath9k_hw.conf.old

sed -i.bak -r -e's/ofdm_sifs=[^ ]+/ofdm_sifs='$1'/g' /etc/modprobe.d/ath9k_hw.conf

sync
echo
echo "atheros ofdm_sifs set. You may power-off now or type \"reboot\" to restart"
echo
